#!/usr/bin/env python3
"""
Git pre-commit hook - runs verify_before_push.py checks automatically.
Install: copy to .git/hooks/pre-commit (or use setup_hooks.py)
"""

import subprocess
import sys
import os

# Change to repo root (parent of .git/hooks/)
repo_root = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
os.chdir(repo_root)

result = subprocess.run(
    [sys.executable, "verify_before_push.py"],
    capture_output=True,
    text=True,
)

# Print output so user sees it
if result.stdout:
    print(result.stdout, end="")
if result.stderr:
    print(result.stderr, end="", file=sys.stderr)

sys.exit(result.returncode)
